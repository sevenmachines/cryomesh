<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cryomesh: /home/niall/Projects/Eclipse/CPP/cryomesh/src/state/Sequence.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="loggo-chaos.png"></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">cryomesh</div>
   <div id="projectbrief">Node mesh connector</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>/home/niall/Projects/Eclipse/CPP/cryomesh/src/state/Sequence.cpp</h1>  </div>
</div>
<div class="contents">
<a href="Sequence_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Sequence.cpp</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> *  Created on: 24-Jul-2009</span>
<a name="l00005"></a>00005 <span class="comment"> *      Author: niall</span>
<a name="l00006"></a>00006 <span class="comment"> */</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#include &quot;<a class="code" href="Sequence_8h.html">Sequence.h</a>&quot;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;boost/scoped_ptr.hpp&gt;</span>
<a name="l00012"></a>00012 <span class="keyword">namespace </span>cryomesh {
<a name="l00013"></a>00013 <span class="keyword">namespace </span>state {
<a name="l00014"></a>00014 <span class="keyword">const</span> std::string <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ad84c6b3291384cd1db8235d735fa7589">Sequence::INPUT_TAG</a> = <span class="stringliteral">&quot;&lt;input&gt;&quot;</span>;
<a name="l00015"></a>00015 <span class="keyword">const</span> std::string <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a3aaf7140b264dc19f04080e8b064814f">Sequence::OUTPUT_TAG</a> = <span class="stringliteral">&quot;&lt;output&gt;&quot;</span>;
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a1d5cb2b54ca31d81b79e6101b572710d">Sequence::Sequence</a>() {
<a name="l00018"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a1d5cb2b54ca31d81b79e6101b572710d">00018</a>         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa93340ff2f94e135b1d4912d90f11e96">initialise</a>();
<a name="l00019"></a>00019 }
<a name="l00020"></a>00020 <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a77f38969fa332873d82db1ddfe4d7e10">Sequence::~Sequence</a>() {
<a name="l00021"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a77f38969fa332873d82db1ddfe4d7e10">00021</a> }
<a name="l00022"></a>00022 <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a1d5cb2b54ca31d81b79e6101b572710d">Sequence::Sequence</a>(<span class="keyword">const</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html">Sequence</a> &amp; seq) {
<a name="l00023"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a73b3fa47233c81ea6814e214ef00d8cd">00023</a> 
<a name="l00024"></a>00024         this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a> = std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;(seq.<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>());
<a name="l00025"></a>00025         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa93340ff2f94e135b1d4912d90f11e96">initialise</a>();
<a name="l00026"></a>00026 }
<a name="l00027"></a>00027 <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a1d5cb2b54ca31d81b79e6101b572710d">Sequence::Sequence</a>(<span class="keyword">const</span> std::vector&lt;Pattern&gt; &amp; input_pats,
<a name="l00028"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#adf63898c170a40c957f18d660d889294">00028</a>                 <span class="keyword">const</span> std::vector&lt;Pattern&gt; &amp; output_pats) {
<a name="l00029"></a>00029         <span class="keywordflow">if</span> (input_pats.size() == output_pats.size()) {
<a name="l00030"></a>00030                 std::vector&lt;Pattern&gt;::const_iterator it_input_pats = input_pats.begin();
<a name="l00031"></a>00031                 <span class="keyword">const</span> std::vector&lt;Pattern&gt;::const_iterator it_input_pats_end = input_pats.end();
<a name="l00032"></a>00032                 std::vector&lt;Pattern&gt;::const_iterator it_output_pats = output_pats.begin();
<a name="l00033"></a>00033                 <span class="keyword">const</span> std::vector&lt;Pattern&gt;::const_iterator it_output_pats_end = output_pats.end();
<a name="l00034"></a>00034 
<a name="l00035"></a>00035                 <span class="keywordflow">while</span> (it_input_pats != it_input_pats_end &amp;&amp; it_output_pats != it_output_pats_end) {
<a name="l00036"></a>00036                         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.push_back(std::pair&lt;Pattern, Pattern&gt;(*it_input_pats, *it_output_pats));
<a name="l00037"></a>00037                         ++it_input_pats;
<a name="l00038"></a>00038                         ++it_output_pats;
<a name="l00039"></a>00039                 }
<a name="l00040"></a>00040                 <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa93340ff2f94e135b1d4912d90f11e96">initialise</a>();
<a name="l00041"></a>00041         } <span class="keywordflow">else</span> {
<a name="l00042"></a>00042                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::Sequence: pattern sizes mismatch&quot;</span> &lt;&lt; std::endl;
<a name="l00043"></a>00043                 <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa93340ff2f94e135b1d4912d90f11e96">initialise</a>();
<a name="l00044"></a>00044         }
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a1d5cb2b54ca31d81b79e6101b572710d">Sequence::Sequence</a>(std::ifstream &amp; ifs) {
<a name="l00047"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a7505ae6753b72c097aa7c99cec2cc936">00047</a> 
<a name="l00048"></a>00048         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#af184d280f5862bdc10c5bff86d3edf19">loadFromFile</a>(ifs);
<a name="l00049"></a>00049         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa93340ff2f94e135b1d4912d90f11e96">initialise</a>();
<a name="l00050"></a>00050 }
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <a class="code" href="classcryomesh_1_1state_1_1Sequence.html">Sequence</a> &amp; <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a12470f0672464c288c58616535fef8a6">Sequence::operator=</a>(<span class="keyword">const</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html">Sequence</a> &amp; seq) {
<a name="l00053"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a12470f0672464c288c58616535fef8a6">00053</a>         <span class="keywordflow">if</span> (&amp;seq == <span class="keyword">this</span>) {
<a name="l00054"></a>00054                 <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00055"></a>00055         }
<a name="l00056"></a>00056         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa93340ff2f94e135b1d4912d90f11e96">initialise</a>();
<a name="l00057"></a>00057         this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a> = std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;(seq.<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>());
<a name="l00058"></a>00058         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa93340ff2f94e135b1d4912d90f11e96">initialise</a>();
<a name="l00059"></a>00059         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00060"></a>00060 }
<a name="l00061"></a>00061 <span class="keyword">const</span> Pattern &amp; <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a58eafb2f3253820c9b8828b801b6d5cb">Sequence::getCurrentInputPattern</a>()<span class="keyword"> const </span>{
<a name="l00062"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a58eafb2f3253820c9b8828b801b6d5cb">00062</a>         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a65b44032582f5585d5d2f77f3e5a58e4">getCurrentIterator</a>()-&gt;first;
<a name="l00063"></a>00063 }
<a name="l00064"></a>00064 <span class="keyword">const</span> <a class="code" href="classcryomesh_1_1state_1_1Pattern.html">Pattern</a> &amp; <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ab9ace25c4ec3b2490dfbffff27fc51e8">Sequence::getAndAdvanceCurrentInputPattern</a>()  {
<a name="l00065"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ab9ace25c4ec3b2490dfbffff27fc51e8">00065</a>         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a65b44032582f5585d5d2f77f3e5a58e4">getCurrentIterator</a>()-&gt;first;
<a name="l00066"></a>00066         ++<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a790c73a269a6a5840faea86b59d25926">it_patterns</a>;
<a name="l00067"></a>00067 }
<a name="l00068"></a>00068 <span class="keyword">const</span> <a class="code" href="classcryomesh_1_1state_1_1Pattern.html">Pattern</a> &amp; <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac339d8b522a9671b698801d7c46f23f1">Sequence::getCurrentOutputPattern</a>()<span class="keyword"> const </span>{
<a name="l00069"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac339d8b522a9671b698801d7c46f23f1">00069</a>         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a65b44032582f5585d5d2f77f3e5a58e4">getCurrentIterator</a>()-&gt;second;
<a name="l00070"></a>00070 }
<a name="l00071"></a>00071 <span class="keyword">const</span> <a class="code" href="classcryomesh_1_1state_1_1Pattern.html">Pattern</a> &amp; <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a516640e73b0f09ee08758d9ce89e51f4">Sequence::getAndAdvanceCurrentOutputPattern</a>()  {
<a name="l00072"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a516640e73b0f09ee08758d9ce89e51f4">00072</a>         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a65b44032582f5585d5d2f77f3e5a58e4">getCurrentIterator</a>()-&gt;second;
<a name="l00073"></a>00073         ++<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a790c73a269a6a5840faea86b59d25926">it_patterns</a>;
<a name="l00074"></a>00074 }
<a name="l00075"></a>00075 <span class="keywordtype">int</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a7f12365034bd9d6453a29384e232f9a5">Sequence::getCurrentInputPatternId</a>()<span class="keyword"> const </span>{
<a name="l00076"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a7f12365034bd9d6453a29384e232f9a5">00076</a>         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a65b44032582f5585d5d2f77f3e5a58e4">getCurrentIterator</a>()-&gt;first.getId();
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 }
<a name="l00079"></a>00079 <span class="keywordtype">int</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a97659380bb1c69d31a012c3b9c9053e8">Sequence::getCurrentOutputPatternId</a>()<span class="keyword"> const </span>{
<a name="l00080"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a97659380bb1c69d31a012c3b9c9053e8">00080</a>         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a65b44032582f5585d5d2f77f3e5a58e4">getCurrentIterator</a>()-&gt;second.getId();
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a65b44032582f5585d5d2f77f3e5a58e4">Sequence::getCurrentIterator</a>()<span class="keyword"> const </span>{
<a name="l00084"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a65b44032582f5585d5d2f77f3e5a58e4">00084</a>         <span class="keywordflow">return</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a790c73a269a6a5840faea86b59d25926">it_patterns</a>;
<a name="l00085"></a>00085 }
<a name="l00086"></a>00086 <span class="keyword">const</span> <a class="code" href="classcryomesh_1_1state_1_1Pattern.html">Pattern</a> &amp; <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ab6e3d9d6bff30c8a551c1ffdc2318985">Sequence::getNextInputPattern</a>() {
<a name="l00087"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ab6e3d9d6bff30c8a551c1ffdc2318985">00087</a>         ++<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a790c73a269a6a5840faea86b59d25926">it_patterns</a>;
<a name="l00088"></a>00088         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a65b44032582f5585d5d2f77f3e5a58e4">getCurrentIterator</a>() == <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.end()) {
<a name="l00089"></a>00089                 this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#afa89b46faf1c362b228e8f1efe573305">setCurrentIterator</a>(this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin());
<a name="l00090"></a>00090         }
<a name="l00091"></a>00091         <span class="keywordflow">return</span> this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a58eafb2f3253820c9b8828b801b6d5cb">getCurrentInputPattern</a>();
<a name="l00092"></a>00092 }
<a name="l00093"></a>00093 <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt; &amp; <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">Sequence::getPatterns</a>()<span class="keyword"> const </span>{
<a name="l00094"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">00094</a>         <span class="keywordflow">return</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>;
<a name="l00095"></a>00095 }
<a name="l00096"></a>00096 <span class="keyword">const</span> <span class="keywordtype">void</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a618581c1dd05bdf1dc6df071ea5ef768">Sequence::setPatterns</a>(<span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt; &amp; pats) {
<a name="l00097"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a618581c1dd05bdf1dc6df071ea5ef768">00097</a>         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a> = std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;(pats);
<a name="l00098"></a>00098         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa93340ff2f94e135b1d4912d90f11e96">initialise</a>();
<a name="l00099"></a>00099 }
<a name="l00100"></a>00100 <span class="keywordtype">void</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a93c04940985c61a2c1aea2a56af7ecf8">Sequence::saveToFile</a>(std::ofstream &amp; ofs)<span class="keyword"> const </span>{
<a name="l00101"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a93c04940985c61a2c1aea2a56af7ecf8">00101</a>         std::stringstream ss;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103         std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_pats = this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin();
<a name="l00104"></a>00104         <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_pats_end =
<a name="l00105"></a>00105                         this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().end();
<a name="l00106"></a>00106         <span class="keywordflow">while</span> (it_pats != it_pats_end) {
<a name="l00107"></a>00107                 ss &lt;&lt; it_pats-&gt;first.getString() &lt;&lt; std::endl;
<a name="l00108"></a>00108                 ss &lt;&lt; it_pats-&gt;second.getString() &lt;&lt; std::endl;
<a name="l00109"></a>00109                 ss &lt;&lt; std::endl;
<a name="l00110"></a>00110                 ++it_pats;
<a name="l00111"></a>00111         }
<a name="l00112"></a>00112         ofs &lt;&lt; ss.str();
<a name="l00113"></a>00113         ofs.close();
<a name="l00114"></a>00114 
<a name="l00115"></a>00115 }
<a name="l00116"></a>00116 <span class="keywordtype">void</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#af184d280f5862bdc10c5bff86d3edf19">Sequence::loadFromFile</a>(std::ifstream &amp; ifs) {
<a name="l00117"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#af184d280f5862bdc10c5bff86d3edf19">00117</a>         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.clear();
<a name="l00118"></a>00118         <span class="keywordtype">int</span> line_count = 0;
<a name="l00119"></a>00119         std::string line_in;
<a name="l00120"></a>00120         std::string line_out;
<a name="l00121"></a>00121         std::string line_blank;
<a name="l00122"></a>00122         <span class="comment">// error in stream test</span>
<a name="l00123"></a>00123         <span class="keywordflow">while</span> (!ifs.eof()) {
<a name="l00124"></a>00124                 getline(ifs, line_in);
<a name="l00125"></a>00125                 ++line_count;
<a name="l00126"></a>00126                 getline(ifs, line_out);
<a name="l00127"></a>00127                 ++line_count;
<a name="l00128"></a>00128                 getline(ifs, line_blank);
<a name="l00129"></a>00129                 ++line_count;
<a name="l00130"></a>00130                 <span class="keywordflow">if</span> (line_in.size() &gt; 0 &amp;&amp; line_out.size() &gt; 0 &amp;&amp; line_blank.size() == 0) {
<a name="l00131"></a>00131                         <span class="keywordflow">if</span> (line_in.size() == line_out.size()) {
<a name="l00132"></a>00132                                 <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.push_back(std::pair&lt;Pattern, Pattern&gt;(<a class="code" href="classcryomesh_1_1state_1_1Pattern.html">Pattern</a>(line_in), <a class="code" href="classcryomesh_1_1state_1_1Pattern.html">Pattern</a>(line_out)));
<a name="l00133"></a>00133                         } <span class="keywordflow">else</span> {
<a name="l00134"></a>00134                                 std::cout
<a name="l00135"></a>00135                                                 &lt;&lt; <span class="stringliteral">&quot;Sequence::loadFromFile: Input/output size mismatch: line: in/out/blank: &quot;</span>
<a name="l00136"></a>00136                                                 &lt;&lt; line_count &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; line_in &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; line_out &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; line_blank
<a name="l00137"></a>00137                                                 &lt;&lt; std::endl;
<a name="l00138"></a>00138                         }
<a name="l00139"></a>00139                 } <span class="keywordflow">else</span> {
<a name="l00140"></a>00140                         std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::loadFromFile: File format error: input/output unpaired: line&quot;</span>
<a name="l00141"></a>00141                                         &lt;&lt; line_count &lt;&lt; std::endl;
<a name="l00142"></a>00142                         <span class="keywordflow">return</span>;
<a name="l00143"></a>00143                 }
<a name="l00144"></a>00144         }
<a name="l00145"></a>00145         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa93340ff2f94e135b1d4912d90f11e96">initialise</a>();
<a name="l00146"></a>00146 }
<a name="l00147"></a>00147 <span class="comment">/*</span>
<a name="l00148"></a>00148 <span class="comment"> * Add pattern to sequence</span>
<a name="l00149"></a>00149 <span class="comment"> */</span>
<a name="l00150"></a>00150 <span class="keywordtype">void</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a5d1cbd5444170cb49adb673638b89d3d">Sequence::addEntry</a>(Pattern new_in_pat, Pattern new_out_pat) {
<a name="l00151"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a5d1cbd5444170cb49adb673638b89d3d">00151</a>         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.push_back(std::pair&lt;Pattern, Pattern&gt;(new_in_pat, new_out_pat));
<a name="l00152"></a>00152 }
<a name="l00153"></a>00153 <span class="comment">/*</span>
<a name="l00154"></a>00154 <span class="comment"> * clear all entries</span>
<a name="l00155"></a>00155 <span class="comment"> */</span>
<a name="l00156"></a>00156 <span class="keywordtype">void</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a8cc685c6a80ba72ea4bad59c9204028b">Sequence::clear</a>() {
<a name="l00157"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a8cc685c6a80ba72ea4bad59c9204028b">00157</a>         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a> = std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;();
<a name="l00158"></a>00158         <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a790c73a269a6a5840faea86b59d25926">it_patterns</a> = <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.begin();
<a name="l00159"></a>00159 }
<a name="l00160"></a>00160 <span class="comment">/*</span>
<a name="l00161"></a>00161 <span class="comment"> * Match sequences outputs, return double (0,1)</span>
<a name="l00162"></a>00162 <span class="comment"> */</span>
<a name="l00163"></a>00163 <span class="keywordtype">double</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac59edc0fd6710419bab718444a3ba5bb">Sequence::compareOutput</a>(<span class="keyword">const</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html">Sequence</a> &amp; seq)<span class="keyword"> const </span>{
<a name="l00164"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac59edc0fd6710419bab718444a3ba5bb">00164</a>         <span class="comment">// deal with trivial cases</span>
<a name="l00165"></a>00165         <span class="comment">// empty</span>
<a name="l00166"></a>00166         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().size() == 0) {
<a name="l00167"></a>00167                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::compare: this is empty &quot;</span> &lt;&lt; std::endl;
<a name="l00168"></a>00168                 <span class="keywordflow">return</span> 0;
<a name="l00169"></a>00169         }
<a name="l00170"></a>00170         <span class="keywordflow">if</span> (seq.<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().size() == 0) {
<a name="l00171"></a>00171                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::compare: obj is empty &quot;</span> &lt;&lt; std::endl;
<a name="l00172"></a>00172                 <span class="keywordflow">return</span> 0;
<a name="l00173"></a>00173         }
<a name="l00174"></a>00174         <span class="comment">//pattern width mismatch</span>
<a name="l00175"></a>00175         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin()-&gt;second.getPattern().size()
<a name="l00176"></a>00176                         != seq.<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin()-&gt;second.getPattern().size()) {
<a name="l00177"></a>00177                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::compare: Output pattern width mismatch: this/obj: &quot;</span>
<a name="l00178"></a>00178                                 &lt;&lt; this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin()-&gt;second.getPattern().size() &lt;&lt; <span class="stringliteral">&quot;/&quot;</span>
<a name="l00179"></a>00179                                 &lt;&lt; seq.<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin()-&gt;second.getPattern().size() &lt;&lt; std::endl;
<a name="l00180"></a>00180                 <span class="keywordflow">return</span> 0;
<a name="l00181"></a>00181         }
<a name="l00182"></a>00182         <span class="comment">// do a simple start to finish comparison of outputs</span>
<a name="l00183"></a>00183         <span class="keywordtype">double</span> total_match = 0;
<a name="l00184"></a>00184         <span class="keywordtype">int</span> pat_count = 0;
<a name="l00185"></a>00185         <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt; &amp; this_patterns = this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>();
<a name="l00186"></a>00186         <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt; &amp; obj_patterns = seq.<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>();
<a name="l00187"></a>00187         <span class="comment">//for all in this_patterns</span>
<a name="l00188"></a>00188         {
<a name="l00189"></a>00189                 std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_this_patterns =
<a name="l00190"></a>00190                                 this_patterns.begin();
<a name="l00191"></a>00191                 <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_this_patterns_end =
<a name="l00192"></a>00192                                 this_patterns.end();
<a name="l00193"></a>00193                 std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_obj_patterns =
<a name="l00194"></a>00194                                 obj_patterns.begin();
<a name="l00195"></a>00195                 <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_obj_patterns_end =
<a name="l00196"></a>00196                                 obj_patterns.end();
<a name="l00197"></a>00197                 <span class="keywordflow">while</span> (it_this_patterns != it_this_patterns_end &amp;&amp; it_obj_patterns != it_obj_patterns_end) {
<a name="l00198"></a>00198                         total_match += (*it_this_patterns).second.compare((*it_obj_patterns).second);
<a name="l00199"></a>00199                         ++pat_count;
<a name="l00200"></a>00200                         ++it_obj_patterns;
<a name="l00201"></a>00201                         ++it_this_patterns;
<a name="l00202"></a>00202                 }
<a name="l00203"></a>00203         }
<a name="l00204"></a>00204         <span class="keywordflow">return</span> (total_match / (<span class="keywordtype">double</span>) pat_count);
<a name="l00205"></a>00205 }
<a name="l00206"></a>00206 <span class="comment">/*</span>
<a name="l00207"></a>00207 <span class="comment"> * Match sequences inputs, return double (0,1)</span>
<a name="l00208"></a>00208 <span class="comment"> */</span>
<a name="l00209"></a>00209 <span class="keywordtype">double</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a6f7579757532eb6f79ec83a710ccce00">Sequence::compareInput</a>(<span class="keyword">const</span> Sequence &amp; seq)<span class="keyword"> const </span>{
<a name="l00210"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a6f7579757532eb6f79ec83a710ccce00">00210</a>         <span class="comment">// deal with trivial cases</span>
<a name="l00211"></a>00211         <span class="comment">// empty</span>
<a name="l00212"></a>00212         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().size() == 0) {
<a name="l00213"></a>00213                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::compare: this is empty &quot;</span> &lt;&lt; std::endl;
<a name="l00214"></a>00214                 <span class="keywordflow">return</span> 0;
<a name="l00215"></a>00215         }
<a name="l00216"></a>00216         <span class="keywordflow">if</span> (seq.getPatterns().size() == 0) {
<a name="l00217"></a>00217                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::compare: obj is empty &quot;</span> &lt;&lt; std::endl;
<a name="l00218"></a>00218                 <span class="keywordflow">return</span> 0;
<a name="l00219"></a>00219         }
<a name="l00220"></a>00220         <span class="comment">//pattern width mismatch</span>
<a name="l00221"></a>00221         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin()-&gt;first.getPattern().size()
<a name="l00222"></a>00222                         != seq.getPatterns().begin()-&gt;first.getPattern().size()) {
<a name="l00223"></a>00223                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::compare: Input pattern width mismatch: this/obj: &quot;</span>
<a name="l00224"></a>00224                                 &lt;&lt; this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin()-&gt;first.getPattern().size() &lt;&lt; <span class="stringliteral">&quot;/&quot;</span>
<a name="l00225"></a>00225                                 &lt;&lt; seq.getPatterns().begin()-&gt;first.getPattern().size() &lt;&lt; std::endl;
<a name="l00226"></a>00226                 <span class="keywordflow">return</span> 0;
<a name="l00227"></a>00227         }
<a name="l00228"></a>00228         <span class="comment">// do a simple start to finish comparison of inputs</span>
<a name="l00229"></a>00229         <span class="keywordtype">double</span> total_match = 0;
<a name="l00230"></a>00230         <span class="keywordtype">int</span> pat_count = 0;
<a name="l00231"></a>00231         <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt; &amp; this_patterns = this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>();
<a name="l00232"></a>00232         <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt; &amp; obj_patterns = seq.getPatterns();
<a name="l00233"></a>00233         <span class="comment">//for all in this_patterns</span>
<a name="l00234"></a>00234         {
<a name="l00235"></a>00235                 std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_this_patterns =
<a name="l00236"></a>00236                                 this_patterns.begin();
<a name="l00237"></a>00237                 <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_this_patterns_end =
<a name="l00238"></a>00238                                 this_patterns.end();
<a name="l00239"></a>00239                 std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_obj_patterns =
<a name="l00240"></a>00240                                 obj_patterns.begin();
<a name="l00241"></a>00241                 <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_obj_patterns_end =
<a name="l00242"></a>00242                                 obj_patterns.end();
<a name="l00243"></a>00243                 <span class="keywordflow">while</span> (it_this_patterns != it_this_patterns_end &amp;&amp; it_obj_patterns != it_obj_patterns_end) {
<a name="l00244"></a>00244                         total_match += (*it_this_patterns).first.compare((*it_obj_patterns).first);
<a name="l00245"></a>00245                         ++pat_count;
<a name="l00246"></a>00246                         ++it_obj_patterns;
<a name="l00247"></a>00247                         ++it_this_patterns;
<a name="l00248"></a>00248                 }
<a name="l00249"></a>00249         }
<a name="l00250"></a>00250         <span class="keywordflow">return</span> (total_match / (<span class="keywordtype">double</span>) pat_count);
<a name="l00251"></a>00251 }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253 <span class="keywordtype">double</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa4f60345ed363990938e27d072fc4a3d">Sequence::compare</a>(<span class="keyword">const</span> Sequence &amp; seq)<span class="keyword"> const </span>{
<a name="l00254"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa4f60345ed363990938e27d072fc4a3d">00254</a>         <span class="comment">// deal with trivial cases</span>
<a name="l00255"></a>00255         <span class="comment">// empty</span>
<a name="l00256"></a>00256         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().size() == 0) {
<a name="l00257"></a>00257                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::compare: this is empty &quot;</span> &lt;&lt; std::endl;
<a name="l00258"></a>00258                 <span class="keywordflow">return</span> 0;
<a name="l00259"></a>00259         }
<a name="l00260"></a>00260         <span class="keywordflow">if</span> (seq.getPatterns().size() == 0) {
<a name="l00261"></a>00261                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::compare: obj is empty &quot;</span> &lt;&lt; std::endl;
<a name="l00262"></a>00262                 <span class="keywordflow">return</span> 0;
<a name="l00263"></a>00263         }
<a name="l00264"></a>00264         <span class="comment">//pattern width mismatch</span>
<a name="l00265"></a>00265         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin()-&gt;first.getPattern().size()
<a name="l00266"></a>00266                         != seq.getPatterns().begin()-&gt;first.getPattern().size()) {
<a name="l00267"></a>00267                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::compare: Input pattern width mismatch: this/obj: &quot;</span>
<a name="l00268"></a>00268                                 &lt;&lt; this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin()-&gt;first.getPattern().size() &lt;&lt; <span class="stringliteral">&quot;/&quot;</span>
<a name="l00269"></a>00269                                 &lt;&lt; seq.getPatterns().begin()-&gt;first.getPattern().size() &lt;&lt; std::endl;
<a name="l00270"></a>00270                 <span class="keywordflow">return</span> 0;
<a name="l00271"></a>00271         }
<a name="l00272"></a>00272         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin()-&gt;second.getPattern().size()
<a name="l00273"></a>00273                         != seq.getPatterns().begin()-&gt;second.getPattern().size()) {
<a name="l00274"></a>00274                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::compare: Output pattern width mismatch: this/obj: &quot;</span>
<a name="l00275"></a>00275                                 &lt;&lt; this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin()-&gt;second.getPattern().size() &lt;&lt; <span class="stringliteral">&quot;/&quot;</span>
<a name="l00276"></a>00276                                 &lt;&lt; seq.getPatterns().begin()-&gt;second.getPattern().size() &lt;&lt; std::endl;
<a name="l00277"></a>00277                 <span class="keywordflow">return</span> 0;
<a name="l00278"></a>00278         }
<a name="l00279"></a>00279         <span class="comment">// find most simlar inputs and then compare outputs</span>
<a name="l00280"></a>00280         <span class="comment">// find the biggest sequences map and use that as our fractional match</span>
<a name="l00281"></a>00281         <span class="keywordtype">int</span> max_size;
<a name="l00282"></a>00282         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().size() &gt; seq.getPatterns().size()) {
<a name="l00283"></a>00283                 max_size = this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().size();
<a name="l00284"></a>00284         } <span class="keywordflow">else</span> {
<a name="l00285"></a>00285                 max_size = seq.getPatterns().size();
<a name="l00286"></a>00286         }
<a name="l00287"></a>00287         <span class="keywordtype">double</span> fraction = (double) 1 / (<span class="keywordtype">double</span>) max_size;
<a name="l00288"></a>00288 
<a name="l00289"></a>00289         <span class="comment">// get  input pattern of sequence that matches the on each of our sequences,</span>
<a name="l00290"></a>00290         <span class="comment">// note we are allowing multiple matches on each input pattern</span>
<a name="l00291"></a>00291 
<a name="l00292"></a>00292         <span class="keywordtype">double</span> total_match = 0;
<a name="l00293"></a>00293 
<a name="l00294"></a>00294         std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_pats_this =
<a name="l00295"></a>00295                         this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin();
<a name="l00296"></a>00296         <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_pats_this_end =
<a name="l00297"></a>00297                         this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().end();
<a name="l00298"></a>00298 
<a name="l00299"></a>00299         <span class="keywordflow">while</span> (it_pats_this != it_pats_this_end) {
<a name="l00300"></a>00300                 <span class="comment">// if in doubt we match to the beginning</span>
<a name="l00301"></a>00301                 std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_pats_best_match =
<a name="l00302"></a>00302                                 seq.getPatterns().begin();
<a name="l00303"></a>00303                 std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_pats_seq =
<a name="l00304"></a>00304                                 seq.getPatterns().begin();
<a name="l00305"></a>00305                 <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_pats_seq_end =
<a name="l00306"></a>00306                                 seq.getPatterns().end();
<a name="l00307"></a>00307                 <span class="keywordtype">double</span> best_input_match = 0;
<a name="l00308"></a>00308                 <span class="keywordflow">while</span> (it_pats_seq != it_pats_seq_end) {
<a name="l00309"></a>00309                         <span class="comment">//find best input match</span>
<a name="l00310"></a>00310 
<a name="l00311"></a>00311                         <span class="keywordtype">double</span> temp_input_match = it_pats_seq-&gt;first.compare(it_pats_this-&gt;first);
<a name="l00312"></a>00312                         <span class="keywordflow">if</span> (best_input_match &lt; temp_input_match) {
<a name="l00313"></a>00313 <span class="preprocessor">#ifdef SEQUENCE_DEBUG // DEBUG</span>
<a name="l00314"></a>00314 <span class="preprocessor"></span>                                std::cout&lt;&lt;<span class="stringliteral">&quot;Sequence::compare: best/temp: &quot;</span>&lt;&lt;best_input_match&lt;&lt;<span class="stringliteral">&quot;/&quot;</span>&lt;&lt;temp_input_match &lt;&lt;std::endl;
<a name="l00315"></a>00315 <span class="preprocessor">#endif // DEBUG</span>
<a name="l00316"></a>00316 <span class="preprocessor"></span>                                best_input_match = temp_input_match;
<a name="l00317"></a>00317                                 it_pats_best_match = it_pats_seq;
<a name="l00318"></a>00318                         }
<a name="l00319"></a>00319                         ++it_pats_seq;
<a name="l00320"></a>00320                 }
<a name="l00321"></a>00321 <span class="preprocessor">#ifdef SEQUENCE_DEBUG</span>
<a name="l00322"></a>00322 <span class="preprocessor"></span>                std::cout&lt;&lt;<span class="stringliteral">&quot;Sequence::compare: &quot;</span> &lt;&lt;std::endl;
<a name="l00323"></a>00323                 std::cout&lt;&lt;<span class="stringliteral">&quot;in: &quot;</span>&lt;&lt;(it_pats_this-&gt;first)&lt;&lt;<span class="stringliteral">&quot; out: &quot;</span>&lt;&lt;(it_pats_this-&gt;second)&lt;&lt;std::endl;
<a name="l00324"></a>00324                 std::cout&lt;&lt;<span class="stringliteral">&quot;in: &quot;</span>&lt;&lt;(it_pats_best_match-&gt;first)&lt;&lt;<span class="stringliteral">&quot; out: &quot;</span>&lt;&lt;(it_pats_best_match-&gt;second)&lt;&lt;std::endl;
<a name="l00325"></a>00325 <span class="preprocessor">#endif //SEQUENCE_DEBUG</span>
<a name="l00326"></a>00326 <span class="preprocessor"></span>                total_match += ((it_pats_this-&gt;second.compare(it_pats_best_match-&gt;second)) * fraction);
<a name="l00327"></a>00327                 ++it_pats_this;
<a name="l00328"></a>00328         }
<a name="l00329"></a>00329         <span class="keywordflow">return</span> total_match;
<a name="l00330"></a>00330 }
<a name="l00331"></a>00331 <span class="keywordtype">double</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa4f60345ed363990938e27d072fc4a3d">Sequence::compare</a>(<span class="keywordtype">int</span> temp_id, <span class="keyword">const</span> Pattern &amp; pat)<span class="keyword"> const </span>{
<a name="l00332"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#af3501217285af5c2c733b46587ae68ed">00332</a>         <span class="comment">// get  pattern relating to id and compare</span>
<a name="l00333"></a>00333         std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_pats = this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin();
<a name="l00334"></a>00334         <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_pats_end =
<a name="l00335"></a>00335                         this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().end();
<a name="l00336"></a>00336         <span class="keywordflow">while</span> (it_pats != it_pats_end) {
<a name="l00337"></a>00337                 <span class="keywordflow">if</span> (it_pats-&gt;first.getId() == temp_id) {
<a name="l00338"></a>00338                         <span class="keywordflow">return</span> it_pats-&gt;first.compare(pat);
<a name="l00339"></a>00339                 } <span class="keywordflow">else</span> {
<a name="l00340"></a>00340                         <span class="keywordflow">if</span> (it_pats-&gt;second.getId() == temp_id) {
<a name="l00341"></a>00341                                 <span class="keywordflow">return</span> it_pats-&gt;second.compare(pat);
<a name="l00342"></a>00342                         }
<a name="l00343"></a>00343                 }
<a name="l00344"></a>00344                 ++it_pats;
<a name="l00345"></a>00345         }
<a name="l00346"></a>00346         std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::compare: No Id match found&quot;</span> &lt;&lt; std::endl;
<a name="l00347"></a>00347         <span class="keywordflow">return</span> 0;
<a name="l00348"></a>00348 }
<a name="l00349"></a>00349 <span class="keywordtype">bool</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#afcade8ed6ea4e8c0b24a1e41c53314b7">Sequence::operator==</a>(<span class="keyword">const</span> Sequence &amp; obj)<span class="keyword"> const </span>{
<a name="l00350"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#afcade8ed6ea4e8c0b24a1e41c53314b7">00350</a>         <span class="keywordtype">bool</span> match = <span class="keyword">true</span>;
<a name="l00351"></a>00351         <span class="keywordflow">if</span> (&amp;obj == 0) {
<a name="l00352"></a>00352                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::operator ==: obj is null &quot;</span> &lt;&lt; std::endl;
<a name="l00353"></a>00353                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00354"></a>00354         }
<a name="l00355"></a>00355 
<a name="l00356"></a>00356         <span class="comment">// check for no patterns</span>
<a name="l00357"></a>00357         <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().size() == 0) {
<a name="l00358"></a>00358                 <span class="keywordflow">if</span> (obj.getPatterns().size() == 0) {
<a name="l00359"></a>00359                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00360"></a>00360                 } <span class="keywordflow">else</span> {
<a name="l00361"></a>00361                         std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::operator ==: size mismatch: this is 0;&quot;</span> &lt;&lt; std::endl;
<a name="l00362"></a>00362                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00363"></a>00363                 }
<a name="l00364"></a>00364         } <span class="keywordflow">else</span> {
<a name="l00365"></a>00365                 <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().size() != obj.getPatterns().size()) {
<a name="l00366"></a>00366                         std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::operator ==: size mismatch &quot;</span> &lt;&lt; std::endl;
<a name="l00367"></a>00367                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00368"></a>00368                 }
<a name="l00369"></a>00369         }
<a name="l00370"></a>00370         match = match &amp;&amp; std::equal(this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().begin(), this-&gt;<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a4112e63451057c277a8409e00087910a">getPatterns</a>().end(),
<a name="l00371"></a>00371                         obj.getPatterns().begin());
<a name="l00372"></a>00372         <span class="keywordflow">if</span> (match == <span class="keyword">false</span>) {
<a name="l00373"></a>00373                 std::cout &lt;&lt; <span class="stringliteral">&quot;Sequence::operator ==: patterns mismatch &quot;</span> &lt;&lt; std::endl;
<a name="l00374"></a>00374                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 }
<a name="l00379"></a>00379 
<a name="l00380"></a>00380 std::ostream &amp; <a class="code" href="namespacecryomesh_1_1state.html#a54d53f52ec3e1e98328d2d4f3cdca7f3">operator&lt;&lt;</a>(std::ostream&amp; os, <span class="keyword">const</span> Sequence &amp; obj) {
<a name="l00381"></a><a class="code" href="namespacecryomesh_1_1state.html#a8868c2c91eb672e03fe69328c04eea19">00381</a>         os &lt;&lt; <span class="stringliteral">&quot;Sequence: &quot;</span> &lt;&lt; &amp;obj &lt;&lt; std::endl;
<a name="l00382"></a>00382         std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_pats = obj.getPatterns().begin();
<a name="l00383"></a>00383         <span class="keyword">const</span> std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_pats_end =
<a name="l00384"></a>00384                         obj.getPatterns().end();
<a name="l00385"></a>00385         <span class="keywordflow">while</span> (it_pats != it_pats_end) {
<a name="l00386"></a>00386                 os &lt;&lt; it_pats-&gt;first.getString() &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; it_pats-&gt;second.getString() &lt;&lt; std::endl;
<a name="l00387"></a>00387                 ++it_pats;
<a name="l00388"></a>00388         }
<a name="l00389"></a>00389         <span class="keywordflow">return</span> os;
<a name="l00390"></a>00390 }
<a name="l00391"></a>00391 
<a name="l00392"></a>00392 <span class="keywordtype">bool</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a8927abddc8688d1a2de797b894dddb9d">Sequence::isAllZeroes</a>()<span class="keyword">const</span>{
<a name="l00393"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a8927abddc8688d1a2de797b894dddb9d">00393</a>         <span class="comment">//for all in patterns</span>
<a name="l00394"></a>00394         {
<a name="l00395"></a>00395                         std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_patterns = <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.begin();
<a name="l00396"></a>00396                 <span class="keyword">const</span>   std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_patterns_end = <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.end();
<a name="l00397"></a>00397                 <span class="keywordflow">while</span>(it_patterns!=it_patterns_end) {
<a name="l00398"></a>00398                         <span class="keywordflow">if</span> ((*it_patterns).first.isAllZeroes() == <span class="keyword">false</span> || (*it_patterns).second.isAllZeroes() == <span class="keyword">false</span>){
<a name="l00399"></a>00399                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00400"></a>00400                         }
<a name="l00401"></a>00401                         ++<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a790c73a269a6a5840faea86b59d25926">it_patterns</a>;
<a name="l00402"></a>00402                 }
<a name="l00403"></a>00403         }
<a name="l00404"></a>00404         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00405"></a>00405 }
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 <span class="keywordtype">bool</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#adcbb1691370a2122cf00a1ff5954495c">Sequence::isInputAllZeroes</a>()<span class="keyword"> const</span>{
<a name="l00408"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#adcbb1691370a2122cf00a1ff5954495c">00408</a>         <span class="comment">//for all in patterns</span>
<a name="l00409"></a>00409         {
<a name="l00410"></a>00410                         std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_patterns = <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.begin();
<a name="l00411"></a>00411                 <span class="keyword">const</span>   std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_patterns_end = <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.end();
<a name="l00412"></a>00412                 <span class="keywordflow">while</span>(it_patterns!=it_patterns_end) {
<a name="l00413"></a>00413                         <span class="keywordflow">if</span> ((*it_patterns).first.isAllZeroes() == <span class="keyword">false</span>){
<a name="l00414"></a>00414                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00415"></a>00415                         }
<a name="l00416"></a>00416                         ++<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a790c73a269a6a5840faea86b59d25926">it_patterns</a>;
<a name="l00417"></a>00417                 }
<a name="l00418"></a>00418         }
<a name="l00419"></a>00419         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00420"></a>00420 }
<a name="l00421"></a>00421 
<a name="l00422"></a>00422 <span class="keywordtype">bool</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a05fb9b9553b3a7f6fca37f659b8907ea">Sequence::isOutputAllZeroes</a>()<span class="keyword">const</span>{
<a name="l00423"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a05fb9b9553b3a7f6fca37f659b8907ea">00423</a>         <span class="comment">//for all in patterns</span>
<a name="l00424"></a>00424         {
<a name="l00425"></a>00425                         std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_patterns = <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.begin();
<a name="l00426"></a>00426                 <span class="keyword">const</span>   std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it_patterns_end = <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.end();
<a name="l00427"></a>00427                 <span class="keywordflow">while</span>(it_patterns!=it_patterns_end) {
<a name="l00428"></a>00428                         <span class="keywordflow">if</span> ((*it_patterns).second.isAllZeroes() == <span class="keyword">false</span>){
<a name="l00429"></a>00429                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00430"></a>00430                         }
<a name="l00431"></a>00431                         ++<a class="code" href="classcryomesh_1_1state_1_1Sequence.html#a790c73a269a6a5840faea86b59d25926">it_patterns</a>;
<a name="l00432"></a>00432                 }
<a name="l00433"></a>00433         }
<a name="l00434"></a>00434         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00435"></a>00435 }
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 <span class="keywordtype">void</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa93340ff2f94e135b1d4912d90f11e96">Sequence::initialise</a>() {
<a name="l00438"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#aa93340ff2f94e135b1d4912d90f11e96">00438</a>         <span class="comment">// if sequence is empty, always leave us with a default pattern</span>
<a name="l00439"></a>00439         <span class="comment">//if (this-&gt;getPatterns().size() == 0) {</span>
<a name="l00440"></a>00440         <span class="comment">//      Pattern pat1;</span>
<a name="l00441"></a>00441         <span class="comment">//      Pattern pat2;</span>
<a name="l00442"></a>00442         <span class="comment">//      patterns[pat1] = pat2;</span>
<a name="l00443"></a>00443         <span class="comment">//}</span>
<a name="l00444"></a>00444         it_patterns = <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#ac01e916df7df88124c2c1f6562ae8d4a">patterns</a>.begin();
<a name="l00445"></a>00445 }
<a name="l00446"></a>00446 
<a name="l00447"></a>00447 <span class="keywordtype">void</span> <a class="code" href="classcryomesh_1_1state_1_1Sequence.html#afa89b46faf1c362b228e8f1efe573305">Sequence::setCurrentIterator</a>(std::list&lt;std::pair&lt;Pattern, Pattern&gt; &gt;::const_iterator it) {
<a name="l00448"></a><a class="code" href="classcryomesh_1_1state_1_1Sequence.html#afa89b46faf1c362b228e8f1efe573305">00448</a>         it_patterns = it;
<a name="l00449"></a>00449 }
<a name="l00450"></a>00450 }
<a name="l00451"></a>00451 
<a name="l00452"></a>00452 }
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Jul 7 2011 08:39:14 for cryomesh by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
